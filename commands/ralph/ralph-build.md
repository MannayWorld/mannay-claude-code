---
name: ralph-build
description: Generate Ralph-ready PRD from feature description
category: ralph
---

# Ralph Build - PRD Generation Command

Generate a complete, Ralph-ready Product Requirements Document (PRD) from a feature description using the interactive PRD Builder skill.

## Purpose

This command triggers the PRD Builder skill to guide you through creating a structured PRD with atomic user stories, clear dependencies, and quality validation. The resulting PRD is optimized for Ralph mode autonomous execution.

## Usage

```bash
/ralph-build
```

After running this command, you'll be guided through a 6-phase interactive workflow to create your PRD.

## Quick Start Examples

### Example 1: Simple Feature
```
User: /ralph-build
Assistant: Welcome to PRD Builder! Let's create a Ralph-ready PRD.

Phase 1: Feature Definition
What feature would you like to build?

User: Add a dark mode toggle to the settings page
Assistant: [Guides through phases 2-6, generating stories, dependencies, and validation]
Result: PRD saved to scripts/ralph/prd.json
```

### Example 2: Complex Feature
```
User: /ralph-build
Assistant: Welcome to PRD Builder! Let's create a Ralph-ready PRD.

Phase 1: Feature Definition
What feature would you like to build?

User: Implement user authentication with OAuth2, email verification, and password reset
Assistant: [Interactive workflow through all phases]
Result: PRD with 12 atomic stories, validated and ready for /ralph-start
```

## The 6-Phase Workflow

The PRD Builder guides you through these phases:

### Phase 1: Feature Definition
- Capture the feature description from user
- Understand the scope and requirements
- Identify key components and integration points
- Define the completion promise

**Output:** Clear feature description and completion criteria

### Phase 2: Story Generation
- Break feature into atomic user stories
- Ensure each story has 3-7 acceptance criteria
- Make stories independently testable
- Follow the "one story = one PR" principle

**Output:** 3-20 well-defined user stories with acceptance criteria

### Phase 3: Story Refinement
- Review generated stories with user
- Add missing stories
- Split overly complex stories
- Merge trivial stories
- Ensure comprehensive coverage

**Output:** Refined story list covering all feature aspects

### Phase 4: Story Dependency Mapping
- Identify dependencies between stories
- Create execution order
- Validate no circular dependencies
- Optimize for parallelization

**Output:** Dependency graph forming a valid DAG

### Phase 5: Acceptance Criteria Review
- Review each story's acceptance criteria
- Ensure criteria are specific and testable
- Add missing criteria
- Remove vague or duplicate criteria
- Validate 3-7 criteria per story

**Output:** High-quality, testable acceptance criteria for all stories

### Phase 6: Final Review and Validation
- Run comprehensive quality validation
- Check JSON schema compliance
- Validate story atomicity
- Verify dependency graph
- Confirm completion promise alignment
- Generate validation report
- Save PRD to `scripts/ralph/prd.json`

**Output:** Validated PRD ready for Ralph mode execution

## What Gets Generated

The command produces a complete PRD JSON file at `scripts/ralph/prd.json`:

```json
{
  "title": "Feature Title",
  "completion_promise": "Specific, testable completion statement",
  "stories": [
    {
      "id": "story-1",
      "title": "Story title",
      "description": "Detailed description",
      "acceptance_criteria": [
        "Criterion 1",
        "Criterion 2",
        "Criterion 3",
        "Criterion 4"
      ],
      "dependencies": [],
      "status": "pending"
    }
  ]
}
```

## Quality Guarantees

Every PRD generated by this command meets these quality standards:

1. **Valid JSON Structure:** Passes `jq` validation
2. **Atomic Stories:** Each story has 3-7 acceptance criteria
3. **Clear Dependencies:** No circular dependencies, valid DAG
4. **Testable Criteria:** Each criterion is specific and verifiable
5. **Optimal Size:** 3-20 stories (recommended range)
6. **Complete Coverage:** All aspects of feature addressed
7. **Ralph-Ready:** Optimized for autonomous execution

## Integration with Ralph Mode

After generating your PRD:

```bash
# 1. Generate PRD
/ralph-build

# 2. Review the generated PRD
cat scripts/ralph/prd.json

# 3. Start Ralph mode to execute
/ralph-start

# 4. Monitor progress
/ralph-status

# 5. Stop when complete
/ralph-stop
```

## When to Use This Command

Use `/ralph-build` when you:

- Want to implement a new feature with Ralph mode
- Need a structured PRD for complex features
- Want atomic, well-defined user stories
- Need dependency mapping for story execution order
- Want quality validation before starting development
- Prefer interactive guidance over manual PRD writing

## When NOT to Use This Command

Don't use `/ralph-build` when you:

- Have a trivial change (< 3 stories needed)
- Already have a complete PRD
- Want to manually write your PRD
- Need to update an existing PRD (edit manually instead)

## Tips for Best Results

1. **Be Specific:** Provide detailed feature descriptions
2. **Think Components:** Mention key parts (UI, API, DB, tests)
3. **State Goals:** Explain what success looks like
4. **Iterate Freely:** Use refinement phases to perfect stories
5. **Trust the Process:** The validation catches quality issues
6. **Review Carefully:** Final review phase is your quality gate

## Validation and Error Handling

The PRD Builder includes comprehensive validation:

- **Schema Errors:** Invalid JSON structure → Returns to appropriate phase
- **Story Issues:** Too few/many criteria → Refinement suggestions
- **Dependency Problems:** Circular deps → Guided resolution
- **Scope Issues:** Too many stories → Split PRD recommendation

All errors provide clear guidance for resolution.

## Example Session

```
User: /ralph-build
Assistant: Welcome to PRD Builder\!

**Phase 1-6:** [Interactive workflow]

Result: PRD saved to scripts/ralph/prd.json with 5 atomic stories
```

## Next Steps

After using /ralph-build:

1. Review the generated PRD in scripts/ralph/prd.json
2. Make any manual adjustments if needed
3. Run /ralph-start to begin execution
4. Use /ralph-status to monitor progress

## See Also

- **PRD Builder Skill**: skills/prd-builder/SKILL.md - Full skill documentation
- **Validator**: skills/prd-builder/lib/validator.md - Validation rules
- **Ralph Start**: /ralph-start - Begin autonomous execution
- **Ralph Status**: /ralph-status - Check execution progress
